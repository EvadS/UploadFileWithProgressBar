рабочий вариант  с прогресс баром 